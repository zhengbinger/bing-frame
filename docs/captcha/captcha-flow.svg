<svg width="900" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- 背景和标题 -->
  <rect width="900" height="500" fill="#f9f9f9" rx="10" ry="10"/>
  <text x="450" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">图形验证码生成流程图</text>
  
  <!-- 流程节点 -->
  <!-- 节点1: 接收请求 -->
  <rect x="100" y="100" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5" ry="5"/>
  <text x="190" y="130" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">1. 接收验证码请求</text>
  <text x="190" y="150" font-family="Arial" font-size="12" text-anchor="middle">获取验证码类型参数</text>
  
  <!-- 节点2: 参数验证 -->
  <rect x="100" y="200" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5" ry="5"/>
  <text x="190" y="230" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">2. 参数验证</text>
  <text x="190" y="250" font-family="Arial" font-size="12" text-anchor="middle">验证类型是否支持</text>
  
  <!-- 节点3: 生成验证码key -->
  <rect x="100" y="300" width="180" height="60" fill="#e3f2fd" stroke="#1976d2" stroke-width="2" rx="5" ry="5"/>
  <text x="190" y="330" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">3. 生成验证码标识</text>
  <text x="190" y="350" font-family="Arial" font-size="12" text-anchor="middle">使用UUID生成唯一key</text>
  
  <!-- 节点4: 获取策略 -->
  <rect x="400" y="150" width="180" height="60" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5" ry="5"/>
  <text x="490" y="180" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">4. 获取验证码策略</text>
  <text x="490" y="200" font-family="Arial" font-size="12" text-anchor="middle">通过策略工厂选择实现</text>
  
  <!-- 节点5: 生成验证码 -->
  <rect x="400" y="250" width="180" height="80" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5" ry="5"/>
  <text x="490" y="280" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">5. 生成验证码</text>
  <text x="490" y="300" font-family="Arial" font-size="12" text-anchor="middle">创建图片并绘制字符</text>
  <text x="490" y="320" font-family="Arial" font-size="12" text-anchor="middle">添加干扰线和噪点</text>
  
  <!-- 节点6: 存储验证码 -->
  <rect x="400" y="370" width="180" height="60" fill="#e8f5e9" stroke="#388e3c" stroke-width="2" rx="5" ry="5"/>
  <text x="490" y="400" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">6. 存储验证码</text>
  <text x="490" y="420" font-family="Arial" font-size="12" text-anchor="middle">保存到Redis并设置过期时间</text>
  
  <!-- 节点7: 返回结果 -->
  <rect x="700" y="250" width="180" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="2" rx="5" ry="5"/>
  <text x="790" y="280" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">7. 返回验证码结果</text>
  <text x="790" y="300" font-family="Arial" font-size="12" text-anchor="middle">包含key和Base64图片</text>
  
  <!-- 节点8: 验证失败 -->
  <rect x="700" y="100" width="180" height="60" fill="#ffebee" stroke="#d32f2f" stroke-width="2" rx="5" ry="5"/>
  <text x="790" y="130" font-family="Arial" font-size="14" text-anchor="middle" font-weight="bold">验证失败</text>
  <text x="790" y="150" font-family="Arial" font-size="12" text-anchor="middle">返回错误信息</text>
  
  <!-- 流程箭头 -->
  <!-- 节点1到节点2 -->
  <line x1="190" y1="160" x2="190" y2="200" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 节点2条件分支 -->
  <line x1="280" y1="230" x2="400" y2="180" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="340" y="200" font-family="Arial" font-size="12" text-anchor="middle">通过</text>
  
  <line x1="280" y1="230" x2="700" y2="130" stroke="#d32f2f" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="490" y="150" font-family="Arial" font-size="12" text-anchor="middle" fill="#d32f2f">失败</text>
  
  <!-- 节点2到节点3 -->
  <line x1="190" y1="260" x2="190" y2="300" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 节点3到节点4 -->
  <line x1="280" y1="330" x2="400" y2="180" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 节点4到节点5 -->
  <line x1="490" y1="210" x2="490" y2="250" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 节点5到节点6 -->
  <line x1="490" y1="330" x2="490" y2="370" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 节点6到节点7 -->
  <line x1="580" y1="400" x2="700" y2="280" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- 箭头标记 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333333"/>
    </marker>
  </defs>
</svg>