<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; fill: #333; }
      .subtitle { font-family: Arial, sans-serif; font-size: 12px; fill: #666; }
      .layer { stroke: #333; stroke-width: 2; }
      .frontend { fill: #e3f2fd; }
      .gateway { fill: #f3e5f5; }
      .service { fill: #e8f5e8; }
      .business { fill: #fff3e0; }
      .data { fill: #fce4ec; }
      .cache { fill: #f1f8e9; }
      .database { fill: #ede7f6; }
      .text { font-family: Arial, sans-serif; font-size: 11px; fill: #333; }
      .arrow { stroke: #666; stroke-width: 1.5; }
    </style>
  </defs>

  <!-- 标题 -->
  <text x="500" y="30" class="title" text-anchor="middle">系统通知推送系统架构图</text>
  
  <!-- 前端层 -->
  <rect x="50" y="60" width="180" height="100" class="layer frontend" rx="5"/>
  <text x="140" y="95" class="subtitle" text-anchor="middle">Web前端</text>
  <text x="140" y="115" class="text" text-anchor="middle">React/Vue.js</text>
  
  <rect x="270" y="60" width="180" height="100" class="layer frontend" rx="5"/>
  <text x="360" y="95" class="subtitle" text-anchor="middle">移动端APP</text>
  <text x="360" y="115" class="text" text-anchor="middle">iOS/Android</text>
  
  <rect x="490" y="60" width="180" height="100" class="layer frontend" rx="5"/>
  <text x="580" y="95" class="subtitle" text-anchor="middle">管理后台</text>
  <text x="580" y="115" class="text" text-anchor="middle">Admin System</text>

  <!-- 连接线 -->
  <line x1="140" y1="160" x2="140" y2="190" class="arrow"/>
  <line x1="360" y1="160" x2="360" y2="190" class="arrow"/>
  <line x1="580" y1="160" x2="580" y2="190" class="arrow"/>

  <!-- API网关 -->
  <rect x="100" y="190" width="520" height="80" class="layer gateway" rx="5"/>
  <text x="360" y="215" class="title" text-anchor="middle">API Gateway</text>
  <text x="360" y="235" class="subtitle" text-anchor="middle">Spring Cloud Gateway</text>
  <text x="360" y="255" class="text" text-anchor="middle">统一入口 | 路由转发 | 负载均衡 | 限流熔断</text>

  <!-- 连接线 -->
  <line x1="260" y1="270" x2="260" y2="300" class="arrow"/>
  <line x1="460" y1="270" x2="460" y2="300" class="arrow"/>

  <!-- 服务层 -->
  <rect x="50" y="300" width="230" height="100" class="layer service" rx="5"/>
  <text x="165" y="330" class="subtitle" text-anchor="middle">通知服务层</text>
  <text x="165" y="350" class="text" text-anchor="middle">Notification Service</text>
  <text x="165" y="365" class="text" text-anchor="middle">• 通知管理</text>
  <text x="165" y="380" class="text" text-anchor="middle">• 推送调度</text>

  <rect x="320" y="300" width="230" height="100" class="layer service" rx="5"/>
  <text x="435" y="330" class="subtitle" text-anchor="middle">消息服务层</text>
  <text x="435" y="350" class="text" text-anchor="middle">Message Service</text>
  <text x="435" y="365" class="text" text-anchor="middle">• 消息处理</text>
  <text x="435" y="380" class="text" text-anchor="middle">• 状态管理</text>

  <rect x="590" y="300" width="180" height="100" class="layer service" rx="5"/>
  <text x="680" y="330" class="subtitle" text-anchor="middle">模板服务层</text>
  <text x="680" y="350" class="text" text-anchor="middle">Template Service</text>
  <text x="680" y="365" class="text" text-anchor="middle">• 模板管理</text>
  <text x="680" y="380" class="text" text-anchor="middle">• 内容渲染</text>

  <!-- 连接线 -->
  <line x1="165" y1="400" x2="165" y2="430" class="arrow"/>
  <line x1="435" y1="400" x2="435" y2="430" class="arrow"/>
  <line x1="680" y1="400" x2="680" y2="430" class="arrow"/>

  <!-- 业务逻辑层 -->
  <rect x="100" y="430" width="580" height="120" class="layer business" rx="5"/>
  <text x="390" y="455" class="title" text-anchor="middle">业务逻辑层</text>
  
  <rect x="120" y="470" width="160" height="70" class="layer service" rx="3"/>
  <text x="200" y="495" class="subtitle" text-anchor="middle">通知处理器</text>
  <text x="200" y="515" class="text" text-anchor="middle">• 规则引擎</text>
  <text x="200" y="530" class="text" text-anchor="middle">• 权限验证</text>

  <rect x="300" y="470" width="160" height="70" class="layer service" rx="3"/>
  <text x="380" y="495" class="subtitle" text-anchor="middle">消息推送器</text>
  <text x="380" y="515" class="text" text-anchor="middle">• 推送策略</text>
  <text x="380" y="530" class="text" text-anchor="middle">• 渠道适配</text>

  <rect x="480" y="470" width="180" height="70" class="layer service" rx="3"/>
  <text x="570" y="495" class="subtitle" text-anchor="middle">通知推送器</text>
  <text x="570" y="515" class="text" text-anchor="middle">• 实时推送</text>
  <text x="570" y="530" class="text" text-anchor="middle">• WebSocket</text>

  <!-- 连接线 -->
  <line x1="200" y1="550" x2="200" y2="580" class="arrow"/>
  <line x1="380" y1="550" x2="380" y2="580" class="arrow"/>
  <line x1="570" y1="550" x2="570" y2="580" class="arrow"/>

  <!-- 数据访问层和缓存层 -->
  <rect x="50" y="580" width="230" height="100" class="layer data" rx="5"/>
  <text x="165" y="610" class="subtitle" text-anchor="middle">数据访问层</text>
  <text x="165" y="630" class="text" text-anchor="middle">MyBatis Plus</text>
  <text x="165" y="645" class="text" text-anchor="middle">• 数据持久化</text>
  <text x="165" y="660" class="text" text-anchor="middle">• 事务管理</text>

  <rect x="320" y="580" width="230" height="100" class="layer cache" rx="5"/>
  <text x="435" y="610" class="subtitle" text-anchor="middle">缓存层</text>
  <text x="435" y="630" class="text" text-anchor="middle">Redis Cache</text>
  <text x="435" y="645" class="text" text-anchor="middle">• 热点数据</text>
  <text x="435" y="660" class="text" text-anchor="middle">• 会话状态</text>

  <rect x="590" y="580" width="180" height="100" class="layer service" rx="5"/>
  <text x="680" y="610" class="subtitle" text-anchor="middle">消息队列</text>
  <text x="680" y="630" class="text" text-anchor="middle">RabbitMQ</text>
  <text x="680" y="645" class="text" text-anchor="middle">• 异步处理</text>
  <text x="680" y="660" class="text" text-anchor="middle">• 消息路由</text>

  <!-- 连接线 -->
  <line x1="165" y1="680" x2="165" y2="710" class="arrow"/>
  <line x1="435" y1="680" x2="435" y2="710" class="arrow"/>
  <line x1="680" y1="680" x2="680" y2="710" class="arrow"/>

  <!-- 数据库层 -->
  <rect x="200" y="710" width="180" height="60" class="layer database" rx="5"/>
  <text x="290" y="735" class="subtitle" text-anchor="middle">MySQL</text>
  <text x="290" y="750" class="text" text-anchor="middle">主数据库</text>

  <rect x="400" y="710" width="180" height="60" class="layer database" rx="5"/>
  <text x="490" y="735" class="subtitle" text-anchor="middle">Redis Cluster</text>
  <text x="490" y="750" class="text" text-anchor="middle">缓存集群</text>

  <rect x="600" y="710" width="180" height="60" class="layer database" rx="5"/>
  <text x="690" y="735" class="subtitle" text-anchor="middle">MongoDB</text>
  <text x="690" y="750" class="text" text-anchor="middle">文档存储</text>

  <!-- 侧边说明 -->
  <text x="820" y="100" class="text" font-size="10">• WebSocket实时通信</text>
  <text x="820" y="120" class="text" font-size="10">• 多渠道推送支持</text>
  <text x="820" y="140" class="text" font-size="10">• 异步消息处理</text>
  <text x="820" y="160" class="text" font-size="10">• 分布式缓存</text>
  <text x="820" y="180" class="text" font-size="10">• 微服务架构</text>
  <text x="820" y="200" class="text" font-size="10">• 高可用设计</text>
</svg>