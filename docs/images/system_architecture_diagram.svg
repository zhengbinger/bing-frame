<?xml version="1.0" encoding="UTF-8"?>
<svg width="1200" height="800" viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <!-- 定义样式 -->
  <defs>
    <style>
      .frontend { fill: #e3f2fd; stroke: #1976d2; stroke-width: 2; }
      .gateway { fill: #f3e5f5; stroke: #7b1fa2; stroke-width: 2; }
      .service { fill: #e8f5e8; stroke: #388e3c; stroke-width: 2; }
      .business { fill: #fff3e0; stroke: #f57c00; stroke-width: 2; }
      .data { fill: #fce4ec; stroke: #c2185b; stroke-width: 2; }
      .arrow { stroke: #616161; stroke-width: 2; fill: none; }
      .text { font-family: 'Microsoft YaHei', Arial, sans-serif; font-size: 12px; fill: #333; }
      .title { font-family: 'Microsoft YaHei', Arial, sans-serif; font-size: 14px; font-weight: bold; fill: #333; }
      .subtitle { font-family: 'Microsoft YaHei', Arial, sans-serif; font-size: 10px; fill: #666; }
    </style>
    <!-- 箭头标记 -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#616161" />
    </marker>
  </defs>

  <!-- 标题 -->
  <text x="600" y="30" text-anchor="middle" class="title">系统通知推送系统架构图</text>

  <!-- 前端层 -->
  <rect x="50" y="60" width="150" height="80" class="frontend" rx="5"/>
  <text x="125" y="85" text-anchor="middle" class="title">Web前端</text>
  <text x="125" y="105" text-anchor="middle" class="subtitle">React/Vue.js</text>
  <text x="125" y="120" text-anchor="middle" class="subtitle">多端访问</text>

  <rect x="250" y="60" width="150" height="80" class="frontend" rx="5"/>
  <text x="325" y="85" text-anchor="middle" class="title">移动端APP</text>
  <text x="325" y="105" text-anchor="middle" class="subtitle">iOS/Android</text>
  <text x="325" y="120" text-anchor="middle" class="subtitle">原生应用</text>

  <rect x="450" y="60" width="150" height="80" class="frontend" rx="5"/>
  <text x="525" y="85" text-anchor="middle" class="title">管理后台</text>
  <text x="525" y="105" text-anchor="middle" class="subtitle">Admin System</text>
  <text x="525" y="120" text-anchor="middle" class="subtitle">后台管理</text>

  <!-- 网关层 -->
  <rect x="150" y="180" width="300" height="60" class="gateway" rx="5"/>
  <text x="300" y="205" text-anchor="middle" class="title">API Gateway</text>
  <text x="300" y="225" text-anchor="middle" class="subtitle">Spring Cloud Gateway | 统一入口 | 路由转发 | 负载均衡 | 限流熔断</text>

  <!-- 服务层 -->
  <rect x="50" y="280" width="200" height="80" class="service" rx="5"/>
  <text x="150" y="305" text-anchor="middle" class="title">通知服务层</text>
  <text x="150" y="325" text-anchor="middle" class="subtitle">Notification</text>
  <text x="150" y="345" text-anchor="middle" class="subtitle">• 通知管理 • 推送调度</text>

  <rect x="300" y="280" width="200" height="80" class="service" rx="5"/>
  <text x="400" y="305" text-anchor="middle" class="title">消息服务层</text>
  <text x="400" y="325" text-anchor="middle" class="subtitle">Message Service</text>
  <text x="400" y="345" text-anchor="middle" class="subtitle">• 消息处理 • 状态管理</text>

  <!-- 业务逻辑层 -->
  <rect x="100" y="400" width="300" height="100" class="business" rx="5"/>
  <text x="250" y="425" text-anchor="middle" class="title">业务逻辑层</text>
  <text x="150" y="445" text-anchor="middle" class="subtitle">通知处理器</text>
  <text x="150" y="460" text-anchor="middle" class="subtitle">• 规则引擎 • 权限验证</text>
  <text x="250" y="445" text-anchor="middle" class="subtitle">消息推送器</text>
  <text x="250" y="460" text-anchor="middle" class="subtitle">• 推送策略 • 渠道适配</text>
  <text x="350" y="445" text-anchor="middle" class="subtitle">通知推送器</text>
  <text x="350" y="460" text-anchor="middle" class="subtitle">• WebSocket • 实时推送</text>

  <!-- 数据访问层和缓存层 -->
  <rect x="50" y="540" width="200" height="80" class="data" rx="5"/>
  <text x="150" y="565" text-anchor="middle" class="title">数据访问层</text>
  <text x="150" y="585" text-anchor="middle" class="subtitle">MyBatis Plus</text>
  <text x="150" y="600" text-anchor="middle" class="subtitle">• 数据持久化 • 事务管理</text>

  <rect x="300" y="540" width="200" height="80" class="data" rx="5"/>
  <text x="400" y="565" text-anchor="middle" class="title">缓存层</text>
  <text x="400" y="585" text-anchor="middle" class="subtitle">Redis Cache</text>
  <text x="400" y="600" text-anchor="middle" class="subtitle">• 热点数据 • 会话状态</text>

  <!-- 数据库层 -->
  <rect x="150" y="660" width="300" height="60" class="data" rx="5"/>
  <text x="300" y="685" text-anchor="middle" class="title">数据库层 & 消息队列</text>
  <text x="300" y="705" text-anchor="middle" class="subtitle">MySQL + MongoDB | RabbitMQ | 主数据存储 + 异步处理</text>

  <!-- 连接线 -->
  <path d="M 125 140 L 125 180" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 325 140 L 325 180" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 525 140 L 525 180" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 250 240 L 150 280" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 350 240 L 400 280" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 150 360 L 200 400" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 250 360 L 250 400" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 350 360 L 300 400" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 200 500 L 150 540" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 300 500 L 400 540" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 150 620 L 250 660" class="arrow" marker-end="url(#arrowhead)"/>
  <path d="M 400 620 L 350 660" class="arrow" marker-end="url(#arrowhead)"/>

  <!-- 右侧说明 -->
  <text x="700" y="80" class="title">架构特点</text>
  <text x="700" y="110" class="text">• 前后端分离架构</text>
  <text x="700" y="130" class="text">• 微服务架构设计</text>
  <text x="700" y="150" class="text">• 多层缓存机制</text>
  <text x="700" y="170" class="text">• 异步消息处理</text>
  <text x="700" y="190" class="text">• 实时推送能力</text>
  
  <text x="700" y="230" class="title">技术栈</text>
  <text x="700" y="260" class="text">• Spring Boot 2.7.x</text>
  <text x="700" y="280" class="text">• Redis + MySQL</text>
  <text x="700" y="300" class="text">• RabbitMQ</text>
  <text x="700" y="320" class="text">• WebSocket</text>
  <text x="700" y="340" class="text">• MongoDB</text>
</svg>