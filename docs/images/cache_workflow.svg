<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="400" viewBox="0 0 900 400">
  <defs>
    <style>
      /* 确保没有黑色底块 */
      * {
        fill-opacity: 1;
        stroke-opacity: 1;
      }
    </style>
  </defs>
  <!-- 背景 -->
  <rect width="900" height="400" fill="#ffffff"/>
  
  <!-- 标题 -->
  <text x="450" y="30" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Spring Cache工作流程图</text>
  
  <!-- 客户端 -->
  <rect x="50" y="100" width="120" height="80" rx="5" ry="5" fill="#e6f3ff" stroke="#3399ff" stroke-width="2"/>
  <text x="110" y="140" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">客户端</text>
  <text x="110" y="160" font-family="Arial" font-size="12" text-anchor="middle">(应用代码/控制器)</text>
  
  <!-- 服务层 -->
  <rect x="250" y="100" width="150" height="80" rx="5" ry="5" fill="#e6ffe6" stroke="#33cc33" stroke-width="2"/>
  <text x="325" y="130" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">服务层</text>
  <text x="325" y="150" font-family="Arial" font-size="12" text-anchor="middle">(@Cacheable/@CachePut/@CacheEvict)</text>
  
  <!-- 缓存 -->
  <rect x="480" y="100" width="120" height="80" rx="5" ry="5" fill="#fff0e6" stroke="#ff9933" stroke-width="2"/>
  <text x="540" y="140" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">缓存</text>
  <text x="540" y="160" font-family="Arial" font-size="12" text-anchor="middle">(内存/Redis等)</text>
  
  <!-- 数据库 -->
  <rect x="680" y="100" width="120" height="80" rx="5" ry="5" fill="#f0f0f0" stroke="#666666" stroke-width="2"/>
  <text x="740" y="140" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">数据库</text>
  <text x="740" y="160" font-family="Arial" font-size="12" text-anchor="middle">(MySQL/其他)</text>
  
  <!-- 关系线和箭头 -->
  <!-- 客户端到服务层 -->
  <line x1="170" y1="140" x2="250" y2="140" stroke="#3399ff" stroke-width="2"/>
  <polygon points="245,135 250,140 245,145" fill="#3399ff"/>
  <text x="210" y="130" font-family="Arial" font-size="12" text-anchor="middle">请求</text>
  
  <!-- 服务层到缓存 -->
  <line x1="400" y1="140" x2="480" y2="140" stroke="#33cc33" stroke-width="2"/>
  <polygon points="475,135 480,140 475,145" fill="#33cc33"/>
  <text x="440" y="130" font-family="Arial" font-size="12" text-anchor="middle">查询缓存</text>
  
  <!-- 缓存到服务层 (缓存命中) -->
  <path d="M 480 180 L 325 220" stroke="#ff9933" stroke-width="2" fill="none"/>
  <polygon points="325,220 335,215 330,225" fill="#ff9933"/>
  <text x="400" y="210" font-family="Arial" font-size="12" text-anchor="middle">缓存命中</text>
  
  <!-- 缓存到数据库 (缓存未命中) -->
  <line x1="600" y1="180" x2="740" y2="180" stroke="#ff9933" stroke-width="2"/>
  <polygon points="735,175 740,180 735,185" fill="#ff9933"/>
  <text x="670" y="170" font-family="Arial" font-size="12" text-anchor="middle">缓存未命中</text>
  
  <!-- 数据库到服务层 -->
  <line x1="740" y1="180" x2="740" y2="220" stroke="#666666" stroke-width="2"/>
  <line x1="740" y1="220" x2="325" y2="220" stroke="#666666" stroke-width="2"/>
  <polygon points="325,220 335,215 330,225" fill="#666666"/>
  <text x="530" y="210" font-family="Arial" font-size="12" text-anchor="middle">查询结果</text>
  
  <!-- 服务层到客户端 -->
  <line x1="325" y1="180" x2="325" y2="260" stroke="#33cc33" stroke-width="2"/>
  <line x1="325" y1="260" x2="110" y2="260" stroke="#33cc33" stroke-width="2"/>
  <polygon points="110,260 120,255 115,265" fill="#33cc33"/>
  <text x="210" y="250" font-family="Arial" font-size="12" text-anchor="middle">返回结果</text>
  
  <!-- 缓存更新流程 -->
  <rect x="250" y="300" width="150" height="60" rx="5" ry="5" fill="#f0f0f0" stroke="#666666" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="325" y="330" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">@CachePut/@CacheEvict</text>
  <text x="325" y="350" font-family="Arial" font-size="12" text-anchor="middle">更新/清除缓存</text>
  
  <!-- 缓存更新连接线 -->
  <path d="M 325 260 L 325 300" stroke="#666666" stroke-width="2" fill="none"/>
  <polygon points="320,295 325,300 330,295" fill="#666666"/>
  
  <path d="M 400 330 L 480 330" stroke="#666666" stroke-width="2" fill="none"/>
  <polygon points="475,325 480,330 475,335" fill="#666666"/>
</svg>