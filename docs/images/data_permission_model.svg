<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600" viewBox="0 0 800 600">
  <!-- 定义样式 -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
    <style>
      .entity {
        fill: #f9f9f9;
        stroke: #333;
        stroke-width: 1;
      }
      .primary-key {
        fill: #e6f3ff;
      }
      .entity-label {
        font-weight: bold;
        font-size: 14px;
        text-anchor: middle;
        fill: #000;
      }
      .attribute {
        font-size: 12px;
        fill: #000;
      }
      .relationship-line {
        stroke: #333;
        stroke-width: 1;
        marker-end: url(#arrowhead);
      }
      .relationship-label {
        font-size: 12px;
        text-anchor: middle;
        fill: #666;
      }
      .title {
        font-size: 18px;
        font-weight: bold;
        text-anchor: middle;
        fill: #000;
      }
      /* 确保没有黑色底块 */
      * {
        fill-opacity: 1;
        stroke-opacity: 1;
      }
    </style>
  </defs>

  <!-- 标题 -->
  <text x="400" y="30" class="title">数据权限管理模型关系图</text>

  <!-- 用户实体 -->
  <rect x="100" y="100" width="150" height="120" rx="5" ry="5" class="entity" />
  <text x="175" y="125" class="entity-label">用户 (User)</text>
  <text x="110" y="150" class="attribute primary-key">id (PK)</text>
  <text x="110" y="175" class="attribute">username</text>
  <text x="110" y="200" class="attribute">password</text>

  <!-- 角色实体 -->
  <rect x="325" y="100" width="150" height="100" rx="5" ry="5" class="entity" />
  <text x="400" y="125" class="entity-label">角色 (Role)</text>
  <text x="335" y="150" class="attribute primary-key">id (PK)</text>
  <text x="335" y="175" class="attribute">name</text>

  <!-- 数据权限实体 -->
  <rect x="550" y="90" width="170" height="190" rx="5" ry="5" class="entity" />
  <text x="635" y="125" class="entity-label">数据权限 (DataPermission)</text>
  <text x="560" y="150" class="attribute primary-key">id (PK)</text>
  <text x="560" y="175" class="attribute">name</text>
  <text x="560" y="200" class="attribute">code</text>
  <text x="560" y="225" class="attribute">data_type</text>
  <text x="560" y="250" class="attribute">permission_type</text>
  <text x="560" y="275" class="attribute">filter_conditions</text>

  <!-- 角色数据权限关联实体 -->
  <rect x="325" y="300" width="200" height="80" rx="5" ry="5" class="entity" />
  <text x="425" y="325" class="entity-label">角色数据权限关联</text>
  <text x="335" y="350" class="attribute">role_id (FK)</text>
  <text x="335" y="375" class="attribute">data_permission_id (FK)</text>

  <!-- 用户角色关系 -->
  <line x1="250" y1="160" x2="325" y2="160" class="relationship-line" />
  <text x="287.5" y="145" class="relationship-label">多对多</text>

  <!-- 角色到角色数据权限关联 -->
  <line x1="400" y1="200" x2="400" y2="300" class="relationship-line" />
  <text x="420" y="250" class="relationship-label">一对多</text>

  <!-- 数据权限到角色数据权限关联 -->
  <line x1="635" y1="280" x2="635" y2="340" class="relationship-line" />
  <line x1="635" y1="340" x2="525" y2="340" class="relationship-line" />
  <text x="655" y="310" class="relationship-label">一对多</text>

  <!-- 数据权限类型图例 -->
  <rect x="100" y="450" width="200" height="100" rx="5" ry="5" fill="#f5f5f5" stroke="#999" stroke-width="1" />
  <text x="200" y="475" class="entity-label" fill="#666">数据权限类型说明</text>
  <text x="110" y="500" class="attribute" fill="#666">1 - 全部数据权限</text>
  <text x="110" y="525" class="attribute" fill="#666">2 - 本人数据权限</text>
  <text x="110" y="550" class="attribute" fill="#666">3 - 本部门数据权限</text>
  <text x="110" y="575" class="attribute" fill="#666">4 - 本部门及以下数据权限</text>

  <!-- 权限管理说明 -->
  <rect x="500" y="450" width="200" height="100" rx="5" ry="5" fill="#f5f5f5" stroke="#999" stroke-width="1" />
  <text x="600" y="475" class="entity-label" fill="#666">权限管理说明</text>
  <text x="510" y="500" class="attribute" fill="#666">• 基于角色分配数据权限</text>
  <text x="510" y="525" class="attribute" fill="#666">• 支持多维度数据过滤</text>
  <text x="510" y="550" class="attribute" fill="#666">• 兼容RBAC权限体系</text>
  <text x="510" y="575" class="attribute" fill="#666">• 支持自定义过滤条件</text>
</svg>