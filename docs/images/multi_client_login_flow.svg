<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="900" height="600" viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <!-- 定义渐变 -->
  <defs>
    <linearGradient id="gradientHeader" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2c3e50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3498db;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="gradientClient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ecf0f1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#bdc3c7;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="gradientService" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3498db;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2980b9;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="gradientDB" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#2ecc71;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#27ae60;stop-opacity:1" />
    </linearGradient>
  </defs>

  <!-- 背景 -->
  <rect width="900" height="600" fill="#f5f5f5" />

  <!-- 标题 -->
  <rect x="100" y="20" width="700" height="50" rx="10" ry="10" fill="url(#gradientHeader)" />
  <text x="450" y="50" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="white">多客户端登录系统数据流图</text>

  <!-- 客户端区域 -->
  <text x="450" y="100" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">客户端层</text>

  <!-- PC管理端 -->
  <rect x="50" y="120" width="160" height="80" rx="8" ry="8" fill="url(#gradientClient)" stroke="#95a5a6" stroke-width="2" />
  <text x="130" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">PC管理端</text>
  <text x="130" y="170" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">Web界面</text>

  <!-- 移动端App -->
  <rect x="250" y="120" width="160" height="80" rx="8" ry="8" fill="url(#gradientClient)" stroke="#95a5a6" stroke-width="2" />
  <text x="330" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">移动端App</text>
  <text x="330" y="170" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">iOS/Android</text>

  <!-- 微信/小程序 -->
  <rect x="450" y="120" width="160" height="80" rx="8" ry="8" fill="url(#gradientClient)" stroke="#95a5a6" stroke-width="2" />
  <text x="530" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">微信/小程序</text>
  <text x="530" y="170" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">微信生态</text>

  <!-- 鸿蒙/元空间 -->
  <rect x="650" y="120" width="160" height="80" rx="8" ry="8" fill="url(#gradientClient)" stroke="#95a5a6" stroke-width="2" />
  <text x="730" y="150" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#2c3e50">鸿蒙/元空间</text>
  <text x="730" y="170" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#7f8c8d">创新平台</text>

  <!-- 服务端区域 -->
  <text x="450" y="230" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">服务层</text>

  <!-- 统一认证中心 -->
  <rect x="180" y="250" width="180" height="80" rx="8" ry="8" fill="url(#gradientService)" stroke="#2980b9" stroke-width="2" />
  <text x="270" y="280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">统一认证中心</text>
  <text x="270" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">认证/授权</text>

  <!-- 设备管理服务 -->
  <rect x="420" y="250" width="180" height="80" rx="8" ry="8" fill="url(#gradientService)" stroke="#2980b9" stroke-width="2" />
  <text x="510" y="280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">设备管理服务</text>
  <text x="510" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">设备识别/安全</text>

  <!-- 令牌服务 -->
  <rect x="660" y="250" width="160" height="80" rx="8" ry="8" fill="url(#gradientService)" stroke="#2980b9" stroke-width="2" />
  <text x="740" y="280" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">令牌服务</text>
  <text x="740" y="300" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">JWT管理</text>

  <!-- 数据层区域 -->
  <text x="450" y="360" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle" fill="#333">数据层</text>

  <!-- 用户数据库 -->
  <rect x="250" y="380" width="160" height="80" rx="8" ry="8" fill="url(#gradientDB)" stroke="#27ae60" stroke-width="2" />
  <text x="330" y="410" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">用户数据库</text>
  <text x="330" y="430" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">user/user_device</text>

  <!-- 登录记录数据库 -->
  <rect x="470" y="380" width="160" height="80" rx="8" ry="8" fill="url(#gradientDB)" stroke="#27ae60" stroke-width="2" />
  <text x="550" y="410" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="white">登录记录</text>
  <text x="550" y="430" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="white">login_record</text>

  <!-- 数据流向 -->
  <!-- 客户端到认证中心 -->
  <line x1="130" y1="200" x2="130" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="130" y1="240" x2="270" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="265,235 270,240 265,245" fill="#e74c3c" />
  <text x="200" y="230" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c" transform="rotate(-45,200,230)">认证请求</text>

  <line x1="330" y1="200" x2="330" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="330" y1="240" x2="270" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="265,235 270,240 265,245" fill="#e74c3c" />
  <text x="300" y="230" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c" transform="rotate(-45,300,230)">认证请求</text>

  <line x1="530" y1="200" x2="530" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="450" y1="240" x2="270" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="265,235 270,240 265,245" fill="#e74c3c" />
  <text x="400" y="230" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c" transform="rotate(-45,400,230)">认证请求</text>

  <line x1="730" y1="200" x2="730" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <line x1="660" y1="240" x2="450" y2="240" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <text x="600" y="230" font-family="Arial, sans-serif" font-size="12" fill="#e74c3c" transform="rotate(-45,600,230)">认证请求</text>

  <!-- 认证中心到设备管理 -->
  <line x1="360" y1="290" x2="420" y2="290" stroke="#3498db" stroke-width="2" />
  <polygon points="415,285 420,290 415,295" fill="#3498db" />
  <text x="390" y="285" font-family="Arial, sans-serif" font-size="12" fill="#3498db">设备验证</text>

  <!-- 认证中心到用户数据库 -->
  <line x1="270" y1="330" x2="270" y2="370" stroke="#3498db" stroke-width="2" />
  <line x1="270" y1="370" x2="330" y2="370" stroke="#3498db" stroke-width="2" />
  <polygon points="325,365 330,370 325,375" fill="#3498db" />
  <text x="300" y="360" font-family="Arial, sans-serif" font-size="12" fill="#3498db">用户验证</text>

  <!-- 认证中心到登录记录 -->
  <line x1="270" y1="330" x2="270" y2="370" stroke="#9b59b6" stroke-width="2" />
  <line x1="270" y1="370" x2="550" y2="370" stroke="#9b59b6" stroke-width="2" />
  <polygon points="545,365 550,370 545,375" fill="#9b59b6" />
  <text x="410" y="360" font-family="Arial, sans-serif" font-size="12" fill="#9b59b6">记录登录</text>

  <!-- 认证中心到令牌服务 -->
  <line x1="360" y1="290" x2="660" y2="290" stroke="#f39c12" stroke-width="2" />
  <polygon points="655,285 660,290 655,295" fill="#f39c12" />
  <text x="510" y="285" font-family="Arial, sans-serif" font-size="12" fill="#f39c12">生成令牌</text>

  <!-- 令牌服务到客户端 -->
  <line x1="740" y1="330" x2="740" y2="400" stroke="#2ecc71" stroke-width="2" />
  <line x1="740" y1="400" x2="740" y2="500" stroke="#2ecc71" stroke-width="2" />
  <line x1="740" y1="500" x2="130" y2="500" stroke="#2ecc71" stroke-width="2" />
  <line x1="130" y1="500" x2="130" y2="220" stroke="#2ecc71" stroke-width="2" />
  <polygon points="125,215 130,220 125,225" fill="#2ecc71" />
  <text x="450" y="515" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2ecc71">返回JWT令牌</text>

  <!-- 设备管理到用户数据库 -->
  <line x1="510" y1="330" x2="510" y2="370" stroke="#3498db" stroke-width="2" />
  <line x1="470" y1="370" x2="510" y2="370" stroke="#3498db" stroke-width="2" />
  <polygon points="505,365 510,370 505,375" fill="#3498db" />
  <text x="490" y="360" font-family="Arial, sans-serif" font-size="12" fill="#3498db">设备查询</text>

  <!-- 图例 -->
  <rect x="50" y="520" width="15" height="15" fill="url(#gradientClient)" stroke="#95a5a6" stroke-width="2" />
  <text x="75" y="532" font-family="Arial, sans-serif" font-size="12" text-anchor="start" fill="#333">客户端</text>

  <rect x="200" y="520" width="15" height="15" fill="url(#gradientService)" stroke="#2980b9" stroke-width="2" />
  <text x="225" y="532" font-family="Arial, sans-serif" font-size="12" text-anchor="start" fill="#333">服务</text>

  <rect x="350" y="520" width="15" height="15" fill="url(#gradientDB)" stroke="#27ae60" stroke-width="2" />
  <text x="375" y="532" font-family="Arial, sans-serif" font-size="12" text-anchor="start" fill="#333">数据库</text>

  <line x1="500" y1="527" x2="560" y2="527" stroke="#3498db" stroke-width="2" />
  <polygon points="555,522 560,527 555,532" fill="#3498db" />
  <text x="570" y="532" font-family="Arial, sans-serif" font-size="12" text-anchor="start" fill="#333">数据流向</text>

  <line x1="50" y="550" x2="560" y2="550" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3" />
  <polygon points="555,545 560,550 555,555" fill="#e74c3c" />
  <text x="570" y="555" font-family="Arial, sans-serif" font-size="12" text-anchor="start" fill="#333">认证请求</text>
</svg>